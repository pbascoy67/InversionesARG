<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Guía de Inversiones en Argentina</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  
  <!-- jQuery UI -->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  
  <!-- SheetJS para exportar a Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  
  <!-- Chart.js y regression.js para Criptomonedas -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/regression@2.0.1/dist/regression.min.js"></script>
  
  <style>
    /************************************************************
      VARIABLES Y ESTILOS GENERALES
    *************************************************************/
    :root {
      --bg-color: #005f6a;         /* Azul petróleo */
      --bg-color-light: #007b8c;
      --bg-color-dark: #00424c;
      --element-bg: #005f6a;
      --element-bg-light: #007b8c;
      --element-bg-dark: #00424c;
      --shadow-light: rgba(255, 255, 255, 0.7);
      --shadow-dark: rgba(0, 0, 0, 0.4);
      --text-color: #ffffff;
      --text-color-secondary: #d1d1d1;
      --text-color-dark: #f0f0f0;
      --button-bg: #005f6a;
      --button-bg-hover: #00424c;
      --button-text-color: #ffffff;
      --border-radius: 15px;
      --font-title: 'Roboto', sans-serif;
      --font-body: 'Open Sans', sans-serif;

      /* Extras para resaltar y niveles de riesgo */
      --highlight-color: #FFD700;  /* Dorado */
      --positive-color: #4CAF50;   /* Verde */
      --warning-color: #FF9800;    /* Naranja */
      --danger-color: #F44336;     /* Rojo */
    }

    body {
      font-family: var(--font-body);
      margin: 0;
      padding: 0;
      background-color: var(--bg-color);
      color: var(--text-color-dark);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow: hidden; /* Evita scroll global */
    }

    /* Placeholders en un blanco suave */
    ::-webkit-input-placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    :-ms-input-placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    ::-ms-input-placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    ::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    /************************************************************
      CABECERA
    *************************************************************/
    header {
      background-color: var(--element-bg);
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 8px var(--shadow-dark);
      z-index: 1000;
    }
    header h1 {
      margin: 0;
      color: var(--text-color);
      font-family: var(--font-title);
      font-size: 1.8rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
    header p {
      margin: 5px 0 0 0;
      color: var(--text-color-secondary);
      font-size: 0.9rem;
    }

    /************************************************************
      DASHBOARD (TARJETAS)
    *************************************************************/
    #dashboard {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 20px;
      padding: 20px;
      flex: 1;
      box-sizing: border-box;
      overflow: hidden;
    }
    .dashboard-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: var(--bg-color-dark);
      border-radius: var(--border-radius);
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-align: center;
      padding: 15px;
      overflow: hidden;
      position: relative;
      color: var(--text-color);
    }
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow:
        10px 10px 20px var(--shadow-dark),
        -10px -10px 20px var(--shadow-light);
    }
    .dashboard-card h2 {
      margin-top: 10px;
      margin-bottom: 0;
      color: #ffffff;
      font-family: var(--font-title);
      font-size: 1.2rem;
    }
    .dashboard-card .card-icon {
      width: 60px;
      height: 60px;
      fill: none;
      stroke: #ffffff;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    #empty-slot {
      background: transparent;
      pointer-events: none;
      box-shadow: none;
    }

    /************************************************************
      SECCIONES DE CONTENIDO
    *************************************************************/
    .section-content {
      display: none; /* Oculto por defecto */
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow-y: auto;
      background-color: var(--bg-color);
      padding: 20px;
      box-sizing: border-box;
      z-index: 2000;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    .section-content h2 {
      text-align: center;
      font-family: var(--font-title);
      margin-top: 0;
      margin-bottom: 20px;
      color: var(--text-color);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      font-size: 28px;
    }
    .section-navigation {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      margin-top: 20px;
    }
    .section-navigation button {
      padding: 10px 20px;
      border: none;
      border-radius: var(--border-radius);
      background-color: var(--button-bg);
      color: var(--button-text-color);
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s, box-shadow 0.3s;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
      font-family: var(--font-body);
    }
    .section-navigation button:hover {
      background: var(--button-bg-hover);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }

    /************************************************************
      ACORDEONES
    *************************************************************/
    .accordion {
      margin-bottom: 20px;
    }
    .accordion button {
      width: 100%;
      padding: 15px;
      text-align: left;
      font-size: 18px;
      border: none;
      outline: none;
      cursor: pointer;
      background: var(--element-bg);
      color: var(--text-color);
      border-radius: var(--border-radius);
      margin-bottom: 10px;
      transition: background-color 0.3s, box-shadow 0.3s, transform 0.3s;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
      font-family: var(--font-body);
    }
    .accordion button::after {
      content: '\25BC';
      font-size: 16px;
      transition: transform 0.3s;
    }
    .accordion button.active::after {
      transform: rotate(180deg);
    }
    .accordion button:hover {
      background-color: var(--element-bg-light);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }
    .panel-content {
      padding: 15px;
      display: none;
      overflow: hidden;
      background-color: var(--element-bg);
      border-radius: var(--border-radius);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
      color: var(--text-color-dark);
      font-family: var(--font-body);
    }

    /************************************************************
      INTRODUCCIÓN
    *************************************************************/
    #introduccion p,
    #introduccion ul,
    #introduccion li {
      font-size: 16px;
      line-height: 1.6;
      margin: 0 0 10px;
      color: var(--text-color-dark);
    }
    .conceptos-basicos {
      background-color: var(--element-bg-dark);
      padding: 10px;
      border-radius: var(--border-radius);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }
    .conceptos-basicos ul {
      list-style: square;
      margin-left: 20px;
    }
    .merval-legend {
      text-align: center;
      margin-top: 10px;
      font-size: 14px;
      color: var(--text-color-dark);
      font-family: var(--font-body);
    }
    .merval-legend a {
      color: var(--text-color);
      text-decoration: none;
      font-weight: bold;
    }
    .merval-legend a:hover {
      color: var(--element-bg-light);
      text-decoration: underline;
    }

    /************************************************************
      PERFIL DEL INVERSOR
    *************************************************************/
    .profiles-container {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 20px;
      margin: 40px auto;
    }
    .profile-card {
      background: var(--element-bg);
      border-radius: var(--border-radius);
      padding: 25px;
      width: 300px;
      box-shadow:
        5px 5px 15px var(--shadow-dark),
        -5px -5px 15px var(--shadow-light);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      color: var(--text-color-dark);
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: var(--font-body);
    }
    .profile-card:hover {
      transform: translateY(-5px);
      box-shadow:
        10px 10px 20px var(--shadow-dark),
        -10px -10px 20px var(--shadow-light);
    }
    .risk-meter {
      height: 10px;
      background: #eee;
      border-radius: 5px;
      margin: 15px 0;
      overflow: hidden;
      width: 100%;
    }
    .risk-level {
      height: 100%;
      transition: width 0.3s ease;
      width: 0%;
    }
    .highlighted-profile {
      color: var(--highlight-color);
      animation: blink 1.5s infinite;
      font-weight: bold;
    }
    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0.2; }
      100% { opacity: 1; }
    }

    /************************************************************
      TEST DE PERFIL (PASO A PASO)
    *************************************************************/
    #test-wrapper {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
      background: var(--element-bg);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow:
        5px 5px 15px var(--shadow-dark),
        -5px -5px 15px var(--shadow-light);
    }
    #test-wrapper .progress-bar {
      height: 10px;
      background: #ccc;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    #test-wrapper .progress {
      height: 100%;
      width: 0%;
      background: var(--element-bg-light);
      transition: width 0.3s ease;
    }
    .test-step {
      display: none; /* Cada paso se oculta por defecto */
      margin-bottom: 20px;
    }
    .test-question {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    .test-step .slider-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 10px auto;
      justify-content: center;
    }
    .test-step label {
      flex: 1;
      color: var(--text-color-dark);
      font-family: var(--font-body);
      text-align: right;
      margin: 0;
    }
    .test-step input[type="range"] {
      flex: 2;
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 5px;
      background: #d3d3d3;
      outline: none;
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    .test-step input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--element-bg-light);
      cursor: pointer;
      box-shadow:
        2px 2px 5px var(--shadow-dark),
        -2px -2px 5px var(--shadow-light);
      transition: background 0.3s, box-shadow 0.3s;
    }
    .range-labels {
      margin-top: 5px;
      display: flex;
      justify-content: space-between;
      color: var(--text-color-dark);
      font-size: 0.8rem;
    }
    .test-navigation {
      display: flex;
      justify-content: space-around;
      gap: 20px;
    }
    .test-navigation button {
      padding: 10px 20px;
      border: none;
      border-radius: var(--border-radius);
      background-color: var(--button-bg);
      color: var(--button-text-color);
      font-size: 0.95rem;
      cursor: pointer;
      transition: background-color 0.3s, box-shadow 0.3s;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
      font-family: var(--font-body);
    }
    .test-navigation button:hover {
      background-color: var(--button-bg-hover);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }
    #test-result-container {
      display: none;
      margin-top: 20px;
      background-color: var(--element-bg-light);
      padding: 15px;
      border-radius: var(--border-radius);
      text-align: center;
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
      color: var(--text-color-dark);
      position: relative;
    }
    #test-result {
      display: inline-block;
      text-align: center;
      font-size: 1.2rem;
    }
    #test-result-profile {
      margin-top: 20px;
      display: flex;
      justify-content: center;
    }

    /************************************************************
      HERRAMIENTAS (CALCULADORA, GENERADOR PROMPT, DÓLARES)
    *************************************************************/
    .herramientas-accordion button {
      width: 100%;
      padding: 15px;
      text-align: left;
      font-size: 18px;
      border: none;
      outline: none;
      cursor: pointer;
      background: var(--element-bg);
      color: var(--text-color);
      border-radius: var(--border-radius);
      margin-bottom: 10px;
      transition: background-color 0.3s, box-shadow 0.3s, transform 0.3s;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
      font-family: var(--font-body);
    }
    .herramientas-panel-content {
      display: none;
      padding: 15px;
      background-color: var(--element-bg);
      border-radius: var(--border-radius);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
      color: var(--text-color-dark);
      margin-bottom: 20px;
    }
    .calculator {
      background: var(--element-bg);
      padding: 2rem;
      border-radius: var(--border-radius);
      box-shadow:
        5px 5px 15px var(--shadow-dark),
        -5px -5px 15px var(--shadow-light);
      width: 100%;
      max-width: 500px;
      margin: 20px auto;
      color: var(--text-color-dark);
      font-family: var(--font-body);
    }
    .calculator h2 {
      text-align: center;
      color: var(--text-color);
      margin-bottom: 1.5rem;
      font-size: 2rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      font-family: var(--font-title);
    }
    .input-group {
      margin-bottom: 1.5rem;
      position: relative;
    }
    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-color-dark);
      font-family: var(--font-body);
    }
    .input-group input,
    .input-group select {
      width: 100%;
      padding: 0.8rem;
      border: none;
      border-radius: var(--border-radius);
      background: var(--element-bg-light);
      color: var(--text-color-dark);
      font-size: 1rem;
      margin-bottom: 0.5rem;
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
      transition: background 0.3s, box-shadow 0.3s;
    }
    .input-group input:focus,
    .input-group select:focus {
      outline: none;
      background: var(--element-bg);
      box-shadow:
        inset 2px 2px 5px var(--shadow-dark),
        inset -2px -2px 5px var(--shadow-light);
    }
    .calculator button {
      width: 100%;
      padding: 1rem;
      background: var(--button-bg);
      border: none;
      border-radius: var(--border-radius);
      color: var(--button-text-color);
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.3s, box-shadow 0.3s;
      margin-top: 10px;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
      font-family: var(--font-body);
    }
    .calculator button:hover {
      background: var(--button-bg-hover);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }
    #result,
    .result {
      margin-top: 1.5rem;
      padding: 1rem;
      background: var(--element-bg-light);
      border-radius: var(--border-radius);
      text-align: center;
      font-size: 1.2rem;
      color: var(--text-color-dark);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
      font-family: var(--font-body);
    }
    .interest-details {
      margin-top: 1rem;
      padding: 1rem;
      background: var(--element-bg-light);
      border-radius: var(--border-radius);
      box-shadow:
        inset 3px 3px 6px var(--shadow-dark),
        inset -3px -3px 6px var(--shadow-light);
      font-family: var(--font-body);
    }
    .interest-period {
      margin: 0.5rem 0;
      padding: 0.5rem;
      background: var(--element-bg);
      border-radius: var(--border-radius);
      box-shadow:
        inset 2px 2px 4px var(--shadow-dark),
        inset -2px -2px 4px var(--shadow-light);
      color: var(--text-color);
      font-family: var(--font-body);
    }
    #download-excel {
      background: #4CAF50;
      margin-bottom: 10px;
    }
    #download-excel:hover {
      background: #45a049;
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }

    /* Generador de Prompt */
    #generador-prompt .container {
      max-width: 500px;
      margin: 20px auto;
    }
    #generador-prompt h1 {
      text-align: center;
      color: var(--text-color);
      margin-bottom: 20px;
      font-family: var(--font-title);
      font-size: 1.8rem;
    }
    #generador-prompt .form-group {
      margin-bottom: 15px;
    }
    #generador-prompt label {
      font-weight: 500;
      color: var(--text-color-dark);
      display: block;
      margin-bottom: 5px;
    }
    #generador-prompt input {
      width: 100%;
      padding: 0.8rem;
      border: none;
      border-radius: var(--border-radius);
      background: var(--element-bg-light);
      color: var(--text-color-dark);
      font-size: 1rem;
      margin-bottom: 0.5rem;
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }
    #generador-prompt .button-container {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 10px;
    }
    #generador-prompt .button {
      flex: 1;
      padding: 0.8rem;
      background: var(--button-bg);
      border: none;
      border-radius: var(--border-radius);
      color: var(--button-text-color);
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s, box-shadow 0.3s;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
    }
    #generador-prompt .button:hover {
      background: var(--button-bg-hover);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }
    #generador-prompt .chatgpt-button {
      width: 100%;
      margin-top: 10px;
      padding: 1rem;
      border: none;
      background: #333;
      color: #fff;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 1.1rem;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
    }
    #generador-prompt .chatgpt-button:hover {
      background: #444;
    }

    /* Cotizaciones Dólares */
    /* Se utiliza grid para formar 3 filas:
       - Las 2 primeras filas con 3 columnas cada una.
       - La última fila tendrá la tarjeta centrada */
    #cotizaciones-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }
    .dolar-card {
      background: var(--element-bg-dark);
      color: var(--text-color);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
      text-align: center;
      position: relative;
      cursor: pointer;
      overflow: hidden;
    }
    .dolar-card h4 {
      margin: 0 0 10px;
      border: 2px solid var(--text-color-dark);
      padding: 5px 10px;
      border-radius: var(--border-radius);
      display: inline-block;
      position: relative;
      z-index: 1;
    }
    /* Tooltip para descripción de cotización */
    .dolar-card .tooltip {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      color: var(--text-color);
      font-family: var(--font-body);
      font-size: 1rem;
      padding: 20px;
      box-sizing: border-box;
      border-radius: var(--border-radius);
      z-index: 10;
      text-align: center;
      justify-content: center;
      align-items: center;
    }
    .dolar-card:hover .tooltip {
      display: flex;
    }

    /************************************************************
      CRIPTOMONEDAS
    *************************************************************/
    .btc-container {
      text-align: center;
      margin-top: 20px;
    }
    .btc-container h1 {
      font-size: 1.3rem;
      margin-bottom: 10px;
      color: var(--text-color);
    }
    .btc-container .price {
      font-size: 2rem;
      margin-bottom: 10px;
      font-weight: bold;
    }
    .chart-container {
      width: 100%;
      height: 300px;
      margin: 20px auto;
    }
    .update-btn {
      margin-top: 10px;
      padding: 8px 16px;
      border-radius: var(--border-radius);
      background: var(--button-bg);
      color: var(--button-text-color);
      border: none;
      cursor: pointer;
      transition: background 0.3s, box-shadow 0.3s;
      box-shadow:
        5px 5px 10px var(--shadow-dark),
        -5px -5px 10px var(--shadow-light);
    }
    .update-btn:hover {
      background: var(--button-bg-hover);
      box-shadow:
        inset 5px 5px 10px var(--shadow-dark),
        inset -5px -5px 10px var(--shadow-light);
    }
    .change-24h.positive { color: var(--positive-color); }
    .change-24h.negative { color: var(--danger-color); }

    /************************************************************
      FOOTER
    *************************************************************/
    footer {
      background-color: var(--element-bg);
      color: var(--text-color-secondary);
      text-align: center;
      padding: 10px;
      font-size: 14px;
      box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
      font-family: var(--font-body);
      z-index: 1000;
    }
    footer .aviso {
      font-size: 12px;
      margin-top: 5px;
      color: #999;
    }

    /************************************************************
      RESPONSIVIDAD
    *************************************************************/
    @media (max-width: 1024px) {
      #dashboard {
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
      }
      #empty-slot {
        display: none;
      }
    }
    @media (max-width: 768px) {
      #dashboard {
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(4, 1fr);
      }
      #empty-slot {
        display: none;
      }
    }
    @media (max-width: 480px) {
      .section-content {
        padding: 10px;
        font-size: 0.9rem;
      }
    }

  </style>
</head>
<body>

  <!-- CABECERA -->
  <header>
    <h1>Guía de Inversiones en Argentina</h1>
    <p>Creado por Pablo Bascoy</p>
  </header>

  <!-- DASHBOARD PRINCIPAL -->
  <div id="dashboard">
    <!-- 1. Introducción -->
    <div class="dashboard-card" data-target="introduccion">
      <svg class="card-icon" viewBox="0 0 24 24">
        <path d="M2 3h6a3 3 0 0 1 3 3v14a3 3 0 0 0-3-3H2Z"></path>
        <path d="M22 3h-6a3 3 0 0 0-3 3v14a3 3 0 0 1 3-3h6Z"></path>
      </svg>
      <h2>Introducción</h2>
    </div>

    <!-- 2. Mercado de Capitales -->
    <div class="dashboard-card" data-target="mercado-de-capitales">
      <svg class="card-icon" viewBox="0 0 24 24">
        <polyline points="13 17 18 12 13 7"></polyline>
        <polyline points="6 17 11 12 6 7"></polyline>
      </svg>
      <h2>Mercado de Capitales</h2>
    </div>

    <!-- 3. Instrumentos Bancarios -->
    <div class="dashboard-card" data-target="instrumentos-bancarios">
      <svg class="card-icon" viewBox="0 0 24 24">
        <path d="M3 10h18"></path>
        <path d="m5 6 7-3 7 3"></path>
        <path d="M4 10v11"></path>
        <path d="M20 10v11"></path>
        <path d="M8 10v11"></path>
        <path d="M16 10v11"></path>
        <path d="M3 21h18"></path>
      </svg>
      <h2>Instrumentos Bancarios</h2>
    </div>

    <!-- 4. Instrumentos Alternativos -->
    <div class="dashboard-card" data-target="instrumentos-alternativos">
      <svg class="card-icon" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M2 12h20"></path>
        <path d="M12 2a15.3 15.3 0 0 1 0 20"></path>
        <path d="M12 2a15.3 15.3 0 0 0 0 20"></path>
      </svg>
      <h2>Instrumentos Alternativos</h2>
    </div>

    <!-- 5. Perfil del Inversor -->
    <div class="dashboard-card" data-target="perfil-del-inversor">
      <svg class="card-icon" viewBox="0 0 24 24">
        <path d="M8 15s-3 0-4 1 0 4 0 4h12s0-3 0-4-4-1-4-1"></path>
        <circle cx="8" cy="7" r="4"></circle>
        <polyline points="17 11 19 13 23 9"></polyline>
      </svg>
      <h2>Perfil del Inversor</h2>
    </div>

    <!-- 6. Test de Perfil -->
    <div class="dashboard-card" data-target="test-perfil">
      <svg class="card-icon" viewBox="0 0 24 24">
        <path d="M9 4h6"></path>
        <path d="M9 2h6a2 2 0 0 1 2 2v2a0 0 0 0 1 0 0H7a0 0 0 0 1 0 0V4a2 2 0 0 1 2-2z"></path>
        <path d="M19 10v10a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V10"></path>
        <path d="M10 14h4"></path>
        <path d="M10 18h4"></path>
      </svg>
      <h2>Test de Perfil</h2>
    </div>

    <!-- 7. Herramientas -->
    <div class="dashboard-card" data-target="herramientas">
      <svg class="card-icon" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="2"></circle>
        <path d="M12 2v2"></path>
        <path d="M12 20v2"></path>
        <path d="m4.93 4.93 1.41 1.41"></path>
        <path d="m17.66 17.66 1.41 1.41"></path>
        <path d="M2 12h2"></path>
        <path d="M20 12h2"></path>
        <path d="m6.34 17.66-1.41 1.41"></path>
        <path d="m19.07 4.93-1.41 1.41"></path>
      </svg>
      <h2>Herramientas</h2>
    </div>

    <!-- Slot vacío para cuadrar filas en desktop -->
    <div id="empty-slot"></div>
  </div>

  <!-- SECCIONES DE CONTENIDO -->

  <!-- INTRODUCCIÓN -->
  <div class="section-content" id="introduccion">
    <div class="section-navigation">
      <button onclick="goDashboard()">Volver al Dashboard</button>
      <button onclick="goNextSection('mercado-de-capitales')">Siguiente</button>
    </div>
    <h2>Bienvenido a la Guía de Inversiones en Argentina</h2>
    <p>
      Invertir es una excelente manera de proteger y hacer crecer tu dinero.
      Si eres nuevo en el mundo de las inversiones, esta guía te ayudará a entender
      las opciones disponibles en Argentina de forma sencilla.
    </p>
    <p class="merval-legend">
      <a href="https://www.tradingview.com/chart/?symbol=BCBA%3AIMV" target="_blank">
        Ver el recorrido del Merval online
      </a>
    </p>
    <div class="conceptos-basicos">
      <h3>Conceptos Básicos</h3>
      <ul>
        <li><strong>Rentabilidad:</strong> Ganancia que puedes obtener al invertir.</li>
        <li><strong>Riesgo:</strong> Posibilidad de perder parte o todo el dinero invertido.</li>
        <li><strong>Diversificación:</strong> Invertir en diferentes opciones para reducir riesgos.</li>
        <li><strong>Liquidez:</strong> Facilidad para convertir tu inversión en efectivo.</li>
      </ul>
    </div>
  </div>

  <!-- MERCADO DE CAPITALES -->
  <div class="section-content" id="mercado-de-capitales">
    <div class="section-navigation">
      <button onclick="goDashboard()">Volver al Dashboard</button>
      <button onclick="goNextSection('instrumentos-bancarios')">Siguiente</button>
    </div>
    <h2>Mercado de Capitales</h2>

    <!-- Acciones -->
    <div class="accordion">
      <button>Acciones</button>
      <div class="panel-content">
        <p>Compra de participaciones de empresas cotizadas en la Bolsa de Comercio de Buenos Aires. Inversión con alto potencial de retorno pero también mayor riesgo.</p>
        <h4>Panel Merval (o Panel Líderes)</h4>
        <ul>
          <li><strong>Definición:</strong> Este panel incluye las acciones más representativas del mercado argentino, seleccionadas según su capitalización bursátil y el volumen de operaciones.</li>
          <li><strong>Características:</strong>
            <ul>
              <li><strong>Alta liquidez:</strong> Son las acciones más negociadas.</li>
              <li><strong>Composición:</strong> Forma parte del índice S&P Merval.</li>
              <li><strong>Ejemplos:</strong> YPF, Grupo Financiero Galicia, Banco Macro, Pampa Energía, Aluar.</li>
            </ul>
          </li>
          <li><strong>Ventajas:</strong>
            <ul>
              <li>Estabilidad relativa.</li>
              <li>Representan sectores clave de la economía.</li>
            </ul>
          </li>
        </ul>
        <h4>Panel General</h4>
        <ul>
          <li><strong>Definición:</strong> Agrupa las empresas que no cumplen con los requisitos para estar en el Panel Merval.</li>
          <li><strong>Características:</strong>
            <ul>
              <li>Menor liquidez y mayor volatilidad.</li>
              <li>Diversidad en sectores y potencial de crecimiento.</li>
            </ul>
          </li>
          <li><strong>Ventajas:</strong>
            <ul>
              <li>Posibilidad de mayores retornos a pesar del riesgo.</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <!-- Bonos -->
    <div class="accordion">
      <button>Bonos</button>
      <div class="panel-content">
        <p>Títulos de deuda emitidos por el Gobierno o empresas. Existen en pesos y dólares, y son opciones más conservadoras.</p>
        <h4>Bonos Soberanos</h4>
        <ul>
          <li><strong>Definición:</strong> Títulos de deuda con respaldo estatal.</li>
          <li><strong>Características:</strong>
            <ul>
              <li>Bonos CER, a tasa fija, Badlar, o tasa variable.</li>
              <li>Emitidos en pesos o dólares (Ley local o extranjera).</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <!-- FCI -->
    <div class="accordion">
      <button>Fondos Comunes de Inversión (FCI)</button>
      <div class="panel-content">
        <p>Vehículos de inversión que agrupan capital de varios inversores para invertir en activos diversos, administrados por expertos.</p>
        <h4>Fondos de Liquidez (Money Market)</h4>
        <ul>
          <li><strong>Objetivo:</strong> Mantener liquidez y minimizar el riesgo.</li>
          <li><strong>Ejemplo:</strong> Fondos Money Market o T+1.</li>
        </ul>
      </div>
    </div>

    <!-- Opciones y Futuros -->
    <div class="accordion">
      <button>Opciones y Futuros</button>
      <div class="panel-content">
        <p>Instrumentos financieros derivados que permiten especular o cubrir riesgos.</p>
        <ul>
          <li><strong>Futuros:</strong> Acuerdos para comprar o vender un activo en el futuro a un precio acordado.</li>
          <li><strong>Opciones:</strong> Derecho de comprar o vender un activo a un precio predeterminado.</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- INSTRUMENTOS BANCARIOS -->
  <div class="section-content" id="instrumentos-bancarios">
    <div class="section-navigation">
      <button onclick="goDashboard()">Volver al Dashboard</button>
      <button onclick="goNextSection('instrumentos-alternativos')">Siguiente</button>
    </div>
    <h2>Instrumentos Bancarios</h2>
    <!-- Plazo Fijo -->
    <div class="accordion">
      <button>Plazo Fijo</button>
      <div class="panel-content">
        <p>Depósitos a término que ofrecen una tasa fija de interés. Pueden ser en pesos o en dólares.</p>
      </div>
    </div>
    <!-- Plazo Fijo UVA -->
    <div class="accordion">
      <button>Plazo Fijo UVA</button>
      <div class="panel-content">
        <p>Similar al plazo fijo, pero con ajuste por inflación (índice CER) y mayor liquidez.</p>
      </div>
    </div>
  </div>

  <!-- INSTRUMENTOS ALTERNATIVOS -->
  <div class="section-content" id="instrumentos-alternativos">
    <div class="section-navigation">
      <button onclick="goDashboard()">Volver al Dashboard</button>
      <button onclick="goNextSection('perfil-del-inversor')">Siguiente</button>
    </div>
    <h2>Instrumentos Alternativos</h2>
    <!-- CEDEARs -->
    <div class="accordion">
      <button>CEDEARs</button>
      <div class="panel-content">
        <p>Instrumentos que representan acciones de empresas extranjeras que cotizan en mercados internacionales.</p>
        <ul>
          <li><strong>Equivalencia:</strong> Cada CEDEAR equivale a una cantidad específica de acciones.</li>
          <li><strong>Cotización:</strong> Se negocian en pesos, vinculados al valor de la acción y al tipo de cambio.</li>
        </ul>
      </div>
    </div>
    <!-- ETFs -->
    <div class="accordion">
      <button>ETFs</button>
      <div class="panel-content">
        <p>Fondos de inversión cotizados en bolsa que agrupan activos diversos. En Argentina se accede a ellos a través de CEDEARs.</p>
        <ul>
          <li><strong>Tipos:</strong> Índices bursátiles, sectores, commodities, bonos, regionales y temáticos.</li>
        </ul>
      </div>
    </div>
    <!-- Cauciones -->
    <div class="accordion">
      <button>Cauciones</button>
      <div class="panel-content">
        <p>Préstamos a muy corto plazo entre inversores, garantizados generalmente por títulos valores.</p>
        <ul>
          <li><strong>Tipos:</strong> Caución bursátil fija y caución garantizada.</li>
        </ul>
      </div>
    </div>
    <!-- Letras -->
    <div class="accordion">
      <button>Letras</button>
      <div class="panel-content">
        <p>Instrumentos de deuda de corto plazo emitidos por el Gobierno, provincias o empresas privadas.</p>
        <ul>
          <li><strong>Características:</strong> Vencen entre 30 días y un año, se determinan con descuento o intereses explícitos.</li>
        </ul>
      </div>
    </div>
    <!-- Obligaciones Negociables -->
    <div class="accordion">
      <button>Obligaciones Negociables</button>
      <div class="panel-content">
        <p>Instrumentos de deuda emitidos por empresas para financiarse, con pago periódico de intereses y devolución del capital al vencimiento.</p>
        <ul>
          <li><strong>Características:</strong> Tienen un plazo definido y se negocian en mercados secundarios.</li>
        </ul>
      </div>
    </div>
    <!-- Criptomonedas -->
    <div class="accordion">
      <button>Criptomonedas</button>
      <div class="panel-content">
        <p>Monedas digitales descentralizadas que usan tecnología blockchain. Su valor depende de la oferta, la demanda y la confianza del mercado.</p>
        <p>Se comercializan a través de exchanges como Binance, Buenbit y SatoshiTango.</p>
        <div class="btc-container">
          <h1>Precio BTC/USD</h1>
          <div id="price" class="price">Cargando...</div>
          <div id="change24h" class="change-24h">Variación 24h: Cargando...</div>
          <div id="maxPrice" class="max-price">Máximo 24h: Cargando...</div>
          <div id="source" class="source">Fuente: Binance API</div>
          <div id="timestamp" class="timestamp">Última actualización: --:--</div>
          <div class="chart-container">
            <canvas id="priceChart"></canvas>
          </div>
          <button id="updateBtn" class="update-btn">Actualizar Precio</button>
        </div>
      </div>
    </div>
  </div>

  <!-- PERFIL DEL INVERSOR -->
  <div class="section-content" id="perfil-del-inversor">
    <div class="section-navigation">
      <button onclick="goDashboard()">Volver al Dashboard</button>
      <button onclick="goNextSection('test-perfil')">Siguiente</button>
    </div>
    <h2>Perfil del Inversor</h2>
    <div class="profiles-container">
      <!-- Conservador -->
      <div class="profile-card">
        <div class="profile-icon">
          <svg viewBox="0 0 24 24" width="60" height="60">
            <path fill="#4CAF50" d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zm-1 9h2v2h-2v-2zm0-6h2v4h-2V9z"/>
          </svg>
        </div>
        <h2 class="profile-title">Inversor Conservador</h2>
        <div class="risk-meter">
          <div class="risk-level" style="width: 30%; background: #4CAF50;"></div>
        </div>
        <p class="profile-description">
          El inversor conservador prioriza la seguridad y la preservación del capital. Prefiere inversiones de bajo riesgo como bonos gubernamentales y depósitos a plazo fijo.
        </p>
      </div>
      <!-- Moderado -->
      <div class="profile-card">
        <div class="profile-icon">
          <svg viewBox="0 0 24 24" width="60" height="60">
            <path fill="#FF9800" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/>
            <path fill="#FF9800" d="M7 12h2v5H7zm4-3h2v8h-2zm4-3h2v11h-2z"/>
          </svg>
        </div>
        <h2 class="profile-title">Inversor Moderado</h2>
        <div class="risk-meter">
          <div class="risk-level" style="width: 60%; background: #FF9800;"></div>
        </div>
        <p class="profile-description">
          El inversor moderado busca un equilibrio entre seguridad y rendimiento, aceptando ciertos riesgos para lograr mejores retornos.
        </p>
      </div>
      <!-- Arriesgado -->
      <div class="profile-card">
        <div class="profile-icon">
          <svg viewBox="0 0 24 24" width="60" height="60">
            <path fill="#F44336" d="M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.48 2.54l2.6 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95zM12 19c-3.87 0-7-3.13-7-7 0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95 0 5.52 4.47 10 9.99 10 3.31 0 6.24-1.61 8.06-4.09l-2.6-1.53C16.17 17.98 14.21 19 12 19z"/>
          </svg>
        </div>
        <h2 class="profile-title">Inversor Arriesgado</h2>
        <div class="risk-meter">
          <div class="risk-level" style="width: 90%; background: #F44336;"></div>
        </div>
        <p class="profile-description">
          El inversor arriesgado busca maximizar sus rendimientos y está dispuesto a asumir riesgos significativos, tolerando alta volatilidad.
        </p>
      </div>
    </div>
  </div>

  <!-- TEST DE PERFIL (PASO A PASO) -->
  <div class="section-content" id="test-perfil">
    <div class="section-navigation">
      <button onclick="goDashboard()">Volver al Dashboard</button>
      <button onclick="goNextSection('herramientas')">Siguiente</button>
    </div>
    <h2>Test de Perfil</h2>
    <div id="test-wrapper">
      <div class="progress-bar">
        <div class="progress" id="test-progress"></div>
      </div>

      <!-- Pasos del test (uno por pregunta) -->
      <div class="test-step" id="step-1">
        <div class="test-question">1. ¿Cuál es tu objetivo principal al invertir?</div>
        <div class="slider-container">
          <label for="q1">Preservar capital</label>
          <input type="range" id="q1" min="1" max="3" step="1" value="1">
        </div>
        <div class="range-labels">
          <span>Mínimo</span><span>Máximo</span>
        </div>
      </div>

      <div class="test-step" id="step-2">
        <div class="test-question">2. ¿Cómo reaccionas ante la posibilidad de perder parte de tu inversión?</div>
        <div class="slider-container">
          <label for="q2">Prefiero inversiones muy seguras</label>
          <input type="range" id="q2" min="1" max="3" step="1" value="1">
        </div>
        <div class="range-labels">
          <span>Mínimo</span><span>Máximo</span>
        </div>
      </div>

      <div class="test-step" id="step-3">
        <div class="test-question">3. ¿Cuál es tu horizonte de inversión?</div>
        <div class="slider-container">
          <label for="q3">Corto plazo (menos de 3 años)</label>
          <input type="range" id="q3" min="1" max="3" step="1" value="1">
        </div>
        <div class="range-labels">
          <span>Mínimo</span><span>Máximo</span>
        </div>
      </div>

      <div class="test-step" id="step-4">
        <div class="test-question">4. ¿Cuál es tu nivel de experiencia en inversiones?</div>
        <div class="slider-container">
          <label for="q4">Principiante, poco conocimiento</label>
          <input type="range" id="q4" min="1" max="3" step="1" value="1">
        </div>
        <div class="range-labels">
          <span>Mínimo</span><span>Máximo</span>
        </div>
      </div>

      <div class="test-step" id="step-5">
        <div class="test-question">5. ¿Qué harías ante una baja significativa en el mercado?</div>
        <div class="slider-container">
          <label for="q5">Vendería todo para evitar pérdidas</label>
          <input type="range" id="q5" min="1" max="3" step="1" value="1">
        </div>
        <div class="range-labels">
          <span>Mínimo</span><span>Máximo</span>
        </div>
      </div>

      <!-- Navegación del test -->
      <div class="test-navigation">
        <button id="btn-prev">Anterior</button>
        <button id="btn-next">Siguiente</button>
      </div>

      <!-- Resultado final -->
      <div id="test-result-container">
        <h3>Tu Perfil de Inversor es: 
          <span id="test-result" class="highlighted-profile"></span>
        </h3>
        <!-- Aquí mostraremos la tarjeta del perfil -->
        <div id="test-result-profile"></div>
      </div>
    </div>
  </div>

  <!-- HERRAMIENTAS -->
  <div class="section-content" id="herramientas">
    <div class="section-navigation">
      <button onclick="goDashboard()">Volver al Dashboard</button>
      <button onclick="goNextSection('introduccion')">Siguiente</button>
    </div>
    <h2>Herramientas</h2>
    <div class="herramientas-accordion">
      
      <!-- Calculadora de Inversiones -->
      <button>Calculadora de Inversiones</button>
      <div class="herramientas-panel-content">
        <div class="calculator animation">
          <h2>Calculadora de Inversiones</h2>
          <div class="input-group">
            <label for="amount">Monto a Invertir:</label>
            <input type="number" id="amount" min="0" step="0.01" placeholder="Ej: 1000">
          </div>
          <div class="input-group">
            <label for="currency">Moneda:</label>
            <select id="currency">
              <option value="USD">USD - Dólar Estadounidense</option>
              <option value="EUR">EUR - Euro</option>
              <option value="GBP">GBP - Libra Esterlina</option>
              <option value="JPY">JPY - Yen Japonés</option>
              <option value="ARS">ARS - Peso Argentino</option>
            </select>
          </div>
          <div class="input-group">
            <label for="interestType">Tipo de Interés:</label>
            <select id="interestType">
              <option value="simple">Interés Simple</option>
              <option value="compound">Interés Compuesto</option>
            </select>
          </div>
          <div class="input-group">
            <label for="capitalization">Frecuencia de Capitalización:</label>
            <select id="capitalization">
              <option value="1">Mensual</option>
              <option value="2">Bimestral</option>
              <option value="3">Trimestral</option>
              <option value="4">Cuatrimestral</option>
              <option value="6">Semestral</option>
              <option value="12">Anual</option>
            </select>
          </div>
          <div class="input-group">
            <label for="rate">Tasa de Interés Anual (%):</label>
            <input type="number" id="rate" min="0" max="100" step="0.01" placeholder="Ej: 35">
          </div>
          <div class="input-group">
            <label for="time">Tiempo (años):</label>
            <input type="number" id="time" min="0" step="0.1" placeholder="Ej: 2">
          </div>
          <button onclick="calculateInvestment()">Calcular</button>
          <button id="download-excel" onclick="downloadExcel()" disabled>Descargar a Excel</button>
          <div id="result"></div>
        </div>
      </div>

      <!-- Generador de Prompt de Inversiones -->
      <button>Generador de Prompt de Inversiones</button>
      <div class="herramientas-panel-content" id="generador-prompt">
        <div class="container">
          <h1>Generador de Prompts Financieros</h1>
          <div class="form-group">
            <label>Tipo de Instrumento Financiero:</label>
            <input type="text" id="instrumento" placeholder="Ej: bono, acción, ETF">
          </div>
          <div class="form-group">
            <label>Denominación:</label>
            <input type="text" id="denominacion" placeholder="Ej: AAPL, GOOGL">
          </div>
          <div class="form-group">
            <label>Período (días):</label>
            <input type="number" id="dias" placeholder="Ej: 30">
          </div>
          <div class="form-group">
            <label>Moneda:</label>
            <input type="text" id="moneda" placeholder="Ej: USD">
          </div>
          <div class="form-group">
            <label>Mercado:</label>
            <input type="text" id="mercado" placeholder="Ej: NYSE">
          </div>
          <div class="button-container">
            <button class="button" onclick="generarPrompt()">Generar Prompt</button>
            <button class="button" onclick="copiarPrompt()">Copiar Prompt</button>
          </div>
          <div class="result" id="resultado"></div>
          <button class="chatgpt-button" onclick="window.open('https://chat.openai.com/', '_blank')">Ir a ChatGPT</button>
        </div>
      </div>

      <!-- Cotizaciones de Tipos de Dólares -->
      <button>Cotizaciones de Tipos de Dólares</button>
      <div class="herramientas-panel-content" id="cotizaciones-panel">
        <div class="dolar-container">
          <!-- Fecha/hora de actualización -->
          <div class="dolar-update-time" id="update-time"></div>
          <div id="cotizaciones-container"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <p>© 2025 Guía de Inversiones en Argentina</p>
    <p class="aviso">La información proporcionada es solo para fines educativos y no constituye asesoramiento financiero. Consulta con un profesional antes de invertir.</p>
  </footer>

  <!-- SCRIPTS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
  <script>
    /************************************************************
      MOSTRAR/OCULTAR SECCIONES
    *************************************************************/
    const cards = document.querySelectorAll('.dashboard-card');
    const sections = document.querySelectorAll('.section-content');

    function showSection(sectionId) {
      document.getElementById('dashboard').style.display = 'none';
      sections.forEach(sec => {
        sec.style.display = (sec.id === sectionId) ? 'block' : 'none';
      });
    }
    function goDashboard() {
      sections.forEach(sec => sec.style.display = 'none');
      document.getElementById('dashboard').style.display = 'grid';
    }
    function goNextSection(nextId) {
      showSection(nextId);
    }

    cards.forEach(card => {
      card.addEventListener('click', () => {
        const target = card.getAttribute('data-target');
        showSection(target);
      });
    });

    /************************************************************
      ACORDEONES
    *************************************************************/
    let dolarInterval; /* Para limpiar el intervalo si se cierra el acordeón */
    $(document).ready(function() {
      $('.accordion button').click(function() {
        $(this).toggleClass('active');
        $(this).next('.panel-content').slideToggle(300);
      });

      $('.herramientas-accordion button').click(function() {
        $(this).toggleClass('active');
        const content = $(this).next('.herramientas-panel-content');
        content.slideToggle(300);

        // Si es el acordeón de "Cotizaciones de Tipos de Dólares"
        if ($(this).text().includes('Cotizaciones de Tipos de Dólares')) {
          if ($(this).hasClass('active')) {
            // Se acaba de abrir => Traer cotizaciones y setInterval
            fetchDolares();
            dolarInterval = setInterval(fetchDolares, 60000); // 1 min
          } else {
            // Se acaba de cerrar => detener interval
            clearInterval(dolarInterval);
          }
        }
      });
    });

    /************************************************************
      TEST DE PERFIL PASO A PASO
    *************************************************************/
    const steps = document.querySelectorAll('.test-step');
    const btnPrev = document.getElementById('btn-prev');
    const btnNext = document.getElementById('btn-next');
    const progressBar = document.getElementById('test-progress');
    const resultContainer = document.getElementById('test-result-container');
    const resultSpan = document.getElementById('test-result');
    const resultProfile = document.getElementById('test-result-profile');
    let currentStep = 1;
    const totalSteps = steps.length;

    // Tarjetas HTML de cada perfil
    const perfilConservadorHTML = `
      <div class="profile-card">
        <div class="profile-icon">
          <svg viewBox="0 0 24 24" width="60" height="60">
            <path fill="#4CAF50" d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zm-1 9h2v2h-2v-2zm0-6h2v4h-2V9z"/>
          </svg>
        </div>
        <h2 class="profile-title">Inversor Conservador</h2>
        <div class="risk-meter">
          <div class="risk-level" style="width: 30%; background: #4CAF50;"></div>
        </div>
        <p class="profile-description">
          El inversor conservador prioriza la seguridad y la preservación del capital. Prefiere inversiones de bajo riesgo como bonos gubernamentales y depósitos a plazo fijo.
        </p>
      </div>
    `;

    const perfilModeradoHTML = `
      <div class="profile-card">
        <div class="profile-icon">
          <svg viewBox="0 0 24 24" width="60" height="60">
            <path fill="#FF9800" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/>
            <path fill="#FF9800" d="M7 12h2v5H7zm4-3h2v8h-2zm4-3h2v11h-2z"/>
          </svg>
        </div>
        <h2 class="profile-title">Inversor Moderado</h2>
        <div class="risk-meter">
          <div class="risk-level" style="width: 60%; background: #FF9800;"></div>
        </div>
        <p class="profile-description">
          El inversor moderado busca un equilibrio entre seguridad y rendimiento, aceptando ciertos riesgos para lograr mejores retornos.
        </p>
      </div>
    `;

    const perfilArriesgadoHTML = `
      <div class="profile-card">
        <div class="profile-icon">
          <svg viewBox="0 0 24 24" width="60" height="60">
            <path fill="#F44336" d="M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.48 2.54l2.6 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95zM12 19c-3.87 0-7-3.13-7-7 0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95 0 5.52 4.47 10 9.99 10 3.31 0 6.24-1.61 8.06-4.09l-2.6-1.53C16.17 17.98 14.21 19 12 19z"/>
          </svg>
        </div>
        <h2 class="profile-title">Inversor Arriesgado</h2>
        <div class="risk-meter">
          <div class="risk-level" style="width: 90%; background: #F44336;"></div>
        </div>
        <p class="profile-description">
          El inversor arriesgado busca maximizar sus rendimientos y está dispuesto a asumir riesgos significativos, tolerando alta volatilidad.
        </p>
      </div>
    `;

    function showStep(step) {
      steps.forEach((s, i) => {
        s.style.display = (i === step - 1) ? 'block' : 'none';
      });
      const progressPercent = ((step - 1) / totalSteps) * 100;
      progressBar.style.width = progressPercent + '%';
      btnPrev.disabled = (step === 1);
      if (step > totalSteps) {
        calculateTestResult();
      }
    }

    showStep(currentStep);

    if (btnNext && btnPrev) {
      btnNext.addEventListener('click', () => {
        currentStep++;
        showStep(currentStep);
      });
      btnPrev.addEventListener('click', () => {
        currentStep--;
        showStep(currentStep);
      });
    }

    function calculateTestResult() {
      let score = 0;
      for (let i = 1; i <= totalSteps; i++) {
        const val = parseInt(document.getElementById('q' + i).value);
        score += val;
      }
      let perfil = '';
      let perfilHTML = '';
      if (score <= 7) {
        perfil = 'Conservador';
        perfilHTML = perfilConservadorHTML;
      } else if (score > 7 && score <= 12) {
        perfil = 'Moderado';
        perfilHTML = perfilModeradoHTML;
      } else {
        perfil = 'Arriesgado';
        perfilHTML = perfilArriesgadoHTML;
      }
      resultSpan.textContent = perfil;
      resultContainer.style.display = 'block';
      progressBar.style.width = '100%';
      steps[totalSteps - 1].style.display = 'none';
      if (btnNext) btnNext.disabled = true;
      if (btnPrev) btnPrev.disabled = true;
      resultProfile.innerHTML = perfilHTML;
    }

    /************************************************************
      CALCULADORA DE INVERSIONES
    *************************************************************/
    let investmentData = {};
    function calculateInvestment() {
      const amount = parseFloat(document.getElementById('amount').value);
      const currency = document.getElementById('currency').value;
      const interestType = document.getElementById('interestType').value;
      const rate = parseFloat(document.getElementById('rate').value) / 100;
      const time = parseFloat(document.getElementById('time').value);
      const capitalization = parseInt(document.getElementById('capitalization').value);
      const resultDiv = document.getElementById('result');
      const downloadButton = document.getElementById('download-excel');

      if (!amount || !rate || !time) {
        resultDiv.innerHTML = "Por favor, complete todos los campos";
        downloadButton.disabled = true;
        return;
      }

      let finalAmount = 0;
      let interest = 0;
      let periodicInterests = [];
      const formatter = new Intl.NumberFormat('es-ES', {
        style: 'currency',
        currency: currency,
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });

      if (interestType === 'simple') {
        // Interés Simple
        const interestPerPeriod = (amount * rate * (capitalization / 12));
        const periods = Math.ceil(time * 12 / capitalization);
        for (let i = 1; i <= periods; i++) {
          periodicInterests.push(interestPerPeriod);
        }
        interest = amount * rate * time;
        finalAmount = amount + interest;
      } else {
        // Interés Compuesto
        const periodsPerYear = 12 / capitalization;
        const totalPeriods = Math.ceil(time * periodsPerYear);
        const ratePerPeriod = rate / periodsPerYear;
        let currentAmount = amount;
        for (let i = 1; i <= totalPeriods; i++) {
          const newAmount = currentAmount * (1 + ratePerPeriod);
          const periodInterest = newAmount - currentAmount;
          periodicInterests.push(periodInterest);
          currentAmount = newAmount;
        }
        finalAmount = currentAmount;
        interest = finalAmount - amount;
      }

      investmentData = {
        "Capital Inicial": formatter.format(amount),
        "Intereses Generados": formatter.format(interest),
        "Monto Final": formatter.format(finalAmount),
        "Frecuencia de Capitalización": `Cada ${capitalization} mes(es)`,
        "Intereses por Período": periodicInterests.map((pi, idx) => `Período ${idx + 1}: ${formatter.format(pi)}`)
      };

      let periodicInterestsHTML = '<div class="interest-details"><h4>Intereses por período:</h4>';
      periodicInterests.forEach((periodInterest, index) => {
        periodicInterestsHTML += `
          <div class="interest-period">
            Período ${index + 1}: ${formatter.format(periodInterest)}
          </div>
        `;
      });
      periodicInterestsHTML += '</div>';

      resultDiv.innerHTML = `
        <h3>Resultados de la Inversión</h3>
        <p>Capital Inicial: ${formatter.format(amount)}</p>
        <p>Intereses Generados: ${formatter.format(interest)}</p>
        <p>Monto Final: ${formatter.format(finalAmount)}</p>
        <p>Frecuencia de Capitalización: Cada ${capitalization} mes(es)</p>
        ${periodicInterestsHTML}
      `;
      downloadButton.disabled = false;
    }

    function downloadExcel() {
      if (!investmentData || Object.keys(investmentData).length === 0) {
        alert("No hay resultados para descargar.");
        return;
      }
      const wb = XLSX.utils.book_new();
      wb.Props = {
        Title: "Resultados de Inversión",
        Subject: "Calculadora de Inversión",
        Author: "Guía de Inversiones en Argentina",
        CreatedDate: new Date()
      };
      const mainData = [
        ["Descripción", "Valor"],
        ["Capital Inicial", investmentData["Capital Inicial"]],
        ["Intereses Generados", investmentData["Intereses Generados"]],
        ["Monto Final", investmentData["Monto Final"]],
        ["Frecuencia de Capitalización", investmentData["Frecuencia de Capitalización"]]
      ];
      const ws_main = XLSX.utils.aoa_to_sheet(mainData);
      XLSX.utils.book_append_sheet(wb, ws_main, "Resultados");

      if (investmentData["Intereses por Período"]) {
        const periodData = [
          ["Intereses por Período"],
          ["Descripción", "Valor"]
        ];
        investmentData["Intereses por Período"].forEach(item => {
          const [descripcion, valor] = item.split(": ");
          periodData.push([descripcion, valor]);
        });
        const ws_period = XLSX.utils.aoa_to_sheet(periodData);
        XLSX.utils.book_append_sheet(wb, ws_period, "Intereses_Periodo");
      }
      XLSX.writeFile(wb, `Resultados_Inversion_${new Date().toISOString().slice(0,19).replace(/[:T]/g,"-")}.xlsx`);
    }

    /************************************************************
      GENERADOR DE PROMPTS
    *************************************************************/
    function generarPrompt() {
      const instrumento = document.getElementById('instrumento').value;
      const denominacion = document.getElementById('denominacion').value;
      const dias = document.getElementById('dias').value;
      const moneda = document.getElementById('moneda').value;
      const mercado = document.getElementById('mercado').value;

      const parteInicial = "Como experto en análisis financiero, necesito que me proporciones ";
      let parteVariable = `un análisis detallado del ${instrumento || 'instrumento financiero'} ${denominacion || ''} `;
      parteVariable += `en los últimos ${dias || '30'} días de operación `;
      parteVariable += `en ${moneda || 'USD'} `;
      parteVariable += `del mercado ${mercado || 'NYSE'}. `;
      const parteFinal = "Incluye en tu análisis: 1) Tendencia general del precio, 2) Volatilidad observada, 3) Volúmenes de negociación, 4) Eventos significativos, y 5) Una recomendación técnica basada en los datos.";

      const promptCompleto = parteInicial + parteVariable + parteFinal;
      document.getElementById('resultado').textContent = promptCompleto;
    }

    function copiarPrompt() {
      const resultado = document.getElementById('resultado');
      const texto = resultado.textContent;
      if (texto) {
        navigator.clipboard.writeText(texto).then(() => {
          alert('¡Prompt copiado al portapapeles!');
        }).catch(err => {
          console.error('Error al copiar:', err);
          alert('No se pudo copiar el texto. Por favor, inténtalo nuevamente.');
        });
      } else {
        alert('Primero genera un prompt para poder copiarlo.');
      }
    }

    /************************************************************
      COTIZACIONES DE TIPOS DE DÓLARES (AUTOMÁTICO)
    *************************************************************/
    // Mapeo para renombrar y asignar descripción a cada tipo
    const dolarMap = {
      'oficial': 'Dólar Oficial',
      'blue': 'Dólar Blue',
      'bolsa': 'Dólar Bolsa (MEP)',
      'contadoconliqui': 'Dólar CCL',
      'mayorista': 'Dólar Mayorista',
      'cripto': 'Dólar Cripto',
      'tarjeta': 'Dólar Tarjeta'
    };

    const tooltipDescriptions = {
      'Dólar Oficial': "Tipo de cambio controlado por el Banco Central de Argentina.",
      'Dólar Blue': "Tipo de cambio en el mercado informal, generalmente más alto que el oficial.",
      'Dólar Bolsa (MEP)': "Compra de bonos en pesos y venta en dólares en el mercado local.",
      'Dólar CCL': "Compra de bonos en pesos y venta en dólares en el exterior.",
      'Dólar Mayorista': "Tipo de cambio para empresas en comercio exterior y operaciones grandes.",
      'Dólar Cripto': "Tipo de cambio usando criptomonedas (stablecoins) ancladas al dólar estadounidense.",
      'Dólar Tarjeta': "Se aplica a compras con tarjeta en moneda extranjera y adquisición de divisas para ahorro, incluye recargos."
    };

    async function fetchDolares() {
      try {
        const response = await fetch('https://dolarapi.com/v1/dolares');
        const data = await response.json();

        // Fecha y hora de la actualización
        const now = new Date();
        const updateTime = now.toLocaleString('es-AR');
        document.getElementById('update-time').textContent = `Última actualización: ${updateTime}`;

        let html = '';
        data.forEach((d, index) => {
          const nombre = d.casa.toLowerCase();
          const titulo = dolarMap[nombre] ? dolarMap[nombre] : d.casa;
          const descripcion = tooltipDescriptions[titulo] ? tooltipDescriptions[titulo] : "";
          // Si es el último elemento (índice 6 en un total de 7) se centra en la fila final
          const extraStyle = (index === 6) ? 'grid-column: 2 / span 1;' : '';
          html += `
            <div class="dolar-card" style="${extraStyle}">
              <h4>${titulo}</h4>
              <p><strong>Compra:</strong> ${d.compra}</p>
              <p><strong>Venta:</strong> ${d.venta}</p>
              <div class="tooltip">${descripcion}</div>
            </div>
          `;
        });

        document.getElementById('cotizaciones-container').innerHTML = html;
      } catch (error) {
        document.getElementById('cotizaciones-container').innerHTML = `
          <p style="color: var(--danger-color);">Error al obtener cotizaciones</p>
        `;
        console.error('Error:', error);
      }
    }

    /************************************************************
      CRIPTOMONEDAS (BTC/USD)
    *************************************************************/
    let priceChart;
    async function fetchBTCPrice() {
      try {
        const [priceResponse, changeResponse, klineResponse] = await Promise.all([
          fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT'),
          fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT'),
          fetch('https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1h&limit=24')
        ]);

        const priceData = await priceResponse.json();
        const changeData = await changeResponse.json();
        const klineData = await klineResponse.json();

        const price = parseFloat(priceData.price).toFixed(2);
        document.getElementById('price').textContent = `$${price}`;

        const change24h = parseFloat(changeData.priceChangePercent).toFixed(2);
        const changeElement = document.getElementById('change24h');
        changeElement.textContent = `Variación 24h: ${change24h}%`;
        changeElement.className = 'change-24h ' + (change24h >= 0 ? 'positive' : 'negative');

        const maxPrice = Math.max(...klineData.map(k => parseFloat(k[2])));
        const maxPriceKline = klineData.find(k => parseFloat(k[2]) === maxPrice);
        const maxTime = new Date(maxPriceKline[0]);
        const maxTimeString = `${String(maxTime.getUTCHours()).padStart(2, '0')}:${String(maxTime.getUTCMinutes()).padStart(2, '0')}`;
        document.getElementById('maxPrice').textContent = `Máximo 24h: $${maxPrice.toFixed(2)} (${maxTimeString} UTC)`;

        const now = new Date();
        const timeString = now.toLocaleTimeString('es-AR', { hour12: false }).slice(0, -3);
        document.getElementById('timestamp').textContent = `Última actualización: ${timeString}`;

        const labels = klineData.map(k => {
          const date = new Date(k[0]);
          return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
        });
        const prices = klineData.map(k => parseFloat(k[4]));
        const points = prices.map((price, index) => [index, price]);
        const result = regression.linear(points);
        const trendlineData = result.points.map(point => point[1]);

        if (priceChart) {
          priceChart.destroy();
        }
        const ctx = document.getElementById('priceChart').getContext('2d');
        priceChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: labels,
            datasets: [
              {
                label: 'Precio BTC/USD',
                data: prices,
                borderColor: '#4CAF50',
                backgroundColor: 'rgba(76, 175, 80, 0.1)',
                borderWidth: 2,
                fill: true,
                tension: 0.4,
                pointRadius: 4,
                pointHoverRadius: 6,
                pointBackgroundColor: '#4CAF50'
              },
              {
                label: 'Línea de Tendencia',
                data: trendlineData,
                borderColor: '#FFA726',
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false,
                pointRadius: 0,
                tension: 0
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
              intersect: false,
              mode: 'index'
            },
            plugins: {
              legend: {
                labels: {
                  color: '#FFFFFF'
                }
              },
              tooltip: {
                backgroundColor: 'rgba(255, 255, 255, 0.9)',
                titleColor: '#1B2E3C',
                bodyColor: '#1B2E3C',
                titleFont: { size: 14, weight: 'bold' },
                bodyFont: { size: 13 },
                padding: 10,
                displayColors: false
              }
            },
            scales: {
              y: {
                ticks: { color: '#FFFFFF' },
                grid: { color: 'rgba(255, 255, 255, 0.1)' }
              },
              x: {
                ticks: { color: '#FFFFFF' },
                grid: { color: 'rgba(255, 255, 255, 0.1)' }
              }
            }
          }
        });
        document.getElementById('price').classList.remove('loading');
      } catch (error) {
        document.getElementById('price').textContent = 'Error al obtener el precio';
        console.error('Error:', error);
      }
    }

    // Consulta a la API de BTC al cargar, y refrescar cada 10 seg
    fetchBTCPrice();
    setInterval(fetchBTCPrice, 10000);
    document.getElementById('updateBtn').addEventListener('click', () => {
      document.getElementById('price').classList.add('loading');
      fetchBTCPrice();
    });
  </script>
</body>
</html>
